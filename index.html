<!DOCTYPE html>
<html lang="en">
<head>
			<!-- Google tag (gtag.js) -->
			<script async src="https://www.googletagmanager.com/gtag/js?id=G-VR8VH5T2XQ"></script>
			<script>
			  window.dataLayer = window.dataLayer || [];
			  function gtag(){dataLayer.push(arguments);}
			  gtag('js', new Date());
			
			  gtag('config', 'G-VR8VH5T2XQ');
			</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern Urdu Text Editor</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Noto+Nastaliq+Urdu:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .urdu-text, .urdu-input {
            font-family: 'Noto Nastaliq Urdu', serif;
            direction: rtl;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">

    <div class="w-full max-w-2xl mx-auto p-4">
        <div class="bg-white rounded-2xl shadow-lg overflow-hidden">
            <div class="p-6 border-b border-gray-200">
                <h1 class="text-2xl font-bold text-gray-800 text-center urdu-text">اردو ٹیکسٹ ایڈیٹر</h1>
                <p class="text-gray-500 text-center mt-1">Urdu Text Editor</p>
            </div>

            <div class="p-6">
                <div id="editor-container">
                    <textarea id="urduInput" class="urdu-input w-full h-48 p-4 bg-gray-50 rounded-lg border-2 border-transparent focus:border-blue-500 focus:ring-0 outline-none transition-all resize-none text-xl" placeholder="یہاں متن درج کریں..."></textarea>
                </div>
                <div id="viewer-container" class="hidden">
                    <div id="lockedText" class="urdu-text w-full h-48 p-4 bg-gray-50 rounded-lg text-xl overflow-y-auto"></div>
                </div>
            </div>

            <div class="p-6 bg-gray-50 flex justify-center items-center space-x-4 rounded-b-2xl">
                <button id="toggleLockBtn" title="Lock/Edit" class="h-12 w-12 flex items-center justify-center bg-blue-500 text-white rounded-full hover:bg-blue-600 focus:outline-none focus:ring-4 focus:ring-blue-300 transition-all transform hover:scale-105">
                    <div id="lockIconWrapper">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg>
                    </div>
                     <div id="editIconWrapper" class="hidden">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L15.232 5.232z"></path></svg>
                    </div>
                </button>
                <button id="copyBtn" title="Copy Text" class="h-12 w-12 flex items-center justify-center bg-green-500 text-white rounded-full hover:bg-green-600 focus:outline-none focus:ring-4 focus:ring-green-300 transition-all transform hover:scale-105 disabled:bg-gray-300 disabled:cursor-not-allowed disabled:transform-none" disabled>
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
                </button>
                <button id="printBtn" title="Save as PDF" class="h-12 w-12 flex items-center justify-center bg-red-500 text-white rounded-full hover:bg-red-600 focus:outline-none focus:ring-4 focus:ring-red-300 transition-all transform hover:scale-105 disabled:bg-gray-300 disabled:cursor-not-allowed disabled:transform-none" disabled>
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"></path></svg>
                </button>
            </div>
            <div id="copy-feedback" class="text-center text-sm text-green-600 p-2 h-8"></div>
        </div>
    </div>

    <script>
        const urduInput = document.getElementById('urduInput');
        const lockedText = document.getElementById('lockedText');
        const editorContainer = document.getElementById('editor-container');
        const viewerContainer = document.getElementById('viewer-container');
        
        const toggleLockBtn = document.getElementById('toggleLockBtn');
        const lockIcon = document.getElementById('lockIconWrapper');
        const editIcon = document.getElementById('editIconWrapper');
        
        const copyBtn = document.getElementById('copyBtn');
        const printBtn = document.getElementById('printBtn');
        const copyFeedback = document.getElementById('copy-feedback');

        let isLocked = false;

        toggleLockBtn.addEventListener('click', () => {
            isLocked = !isLocked;
            const currentText = urduInput.value;

            if (isLocked) {
                // Lock the text
                lockedText.innerText = currentText || 'کوئی متن درج نہیں کیا گیا';
                editorContainer.classList.add('hidden');
                viewerContainer.classList.remove('hidden');
                
                lockIcon.classList.add('hidden');
                editIcon.classList.remove('hidden');
                toggleLockBtn.setAttribute('title', 'Edit');

                // Enable copy and print buttons if there is text
                if (currentText.trim() !== '') {
                    copyBtn.disabled = false;
                    printBtn.disabled = false;
                } else {
                    copyBtn.disabled = true;
                    printBtn.disabled = true;
                }

            } else {
                // Unlock for editing
                editorContainer.classList.remove('hidden');
                viewerContainer.classList.add('hidden');
                
                lockIcon.classList.remove('hidden');
                editIcon.classList.add('hidden');
                toggleLockBtn.setAttribute('title', 'Lock');

                // Always disable copy and print when editing
                copyBtn.disabled = true;
                printBtn.disabled = true;
            }
        });

        copyBtn.addEventListener('click', () => {
            if (!isLocked || !lockedText.innerText) return;
            
            // Create a temporary textarea to copy from
            const tempTextArea = document.createElement('textarea');
            tempTextArea.value = lockedText.innerText;
            document.body.appendChild(tempTextArea);
            tempTextArea.select();
            
            try {
                document.execCommand('copy');
                copyFeedback.textContent = 'متن کاپی ہو گیا!';
                setTimeout(() => {
                    copyFeedback.textContent = '';
                }, 2000);
            } catch (err) {
                console.error('Failed to copy text: ', err);
                copyFeedback.textContent = 'کاپی کرنے میں ناکامی!';
                 setTimeout(() => {
                    copyFeedback.textContent = '';
                }, 2000);
            }
            
            document.body.removeChild(tempTextArea);
        });

        printBtn.addEventListener('click', () => {
            if (!isLocked || !lockedText.innerText) return;

            const element = document.createElement('div');
            element.innerHTML = `<div style="font-family: 'Noto Nastaliq Urdu', serif; direction: rtl; padding: 40px; font-size: 20px;">${lockedText.innerHTML.replace(/\n/g, '<br>')}</div>`;
            
            const opt = {
                margin:       1,
                filename:     'urdu-text.pdf',
                image:        { type: 'jpeg', quality: 0.98 },
                html2canvas:  { scale: 2 },
                jsPDF:        { unit: 'in', format: 'letter', orientation: 'portrait' }
            };

            html2pdf().from(element).set(opt).save();
        });
        
        // Initialize Lucide icons
        lucide.createIcons();
    </script>

</body>
</html>


